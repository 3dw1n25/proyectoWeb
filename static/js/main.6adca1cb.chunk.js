(this.webpackJsonpprojecto=this.webpackJsonpprojecto||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},50:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),s=n(21),a=n.n(s),i=(n(28),n(29),n(0)),o=function(){return Object(i.jsx)("div",{className:" ",children:Object(i.jsx)("h1",{className:"text-6xl text-red-50 m-2",children:"PochiDev"})})},l=function(e){var t=e.children,n=e.onClick,r=e.type,c=void 0===r?"text":r;return Object(i.jsx)("button",{className:"bg-gray-600 hover:bg-red-900 h-12 p-3 m-2 rounded text-red-50 ",onClick:n,type:c,children:t})},j=n(2),u=function(){var e=Object(j.g)();return Object(i.jsxs)("div",{className:"flex flex-col justify-between items-center min-h-screen bg-gradient-to-r from-gray-600 to-green-400",children:[Object(i.jsx)(o,{}),Object(i.jsx)("div",{className:"mt-40 flex flex-col items-center",children:Object(i.jsx)("h1",{className:"text-5xl text-red-50 m-2",children:"\xa1Bienvenido a nuestra p\xe1gina!"})}),Object(i.jsx)("div",{className:"mb-72",children:Object(i.jsx)(l,{onClick:function(t){e("/Login")},children:"Iniciar Sesion"})})]})},d=n(6),x=n.n(d),b=n(7),f=n(3),h=function(e){var t=e.children,n=e.onClick;return Object(i.jsx)("button",{className:"bg-yellow-400 hover:bg-red-400 p-3 m-2 rounded text-gray-900",onClick:n,children:t})},m=function(e){var t=e.type,n=void 0===t?"text":t,r=e.placeholder,c=e.name,s=e.onChange;return Object(i.jsx)("input",{className:"p-2 rounded w-2/4 focus:outline-none focus:ring-2 focus:ring-green-400 focus:border-transparent",type:n,name:c,placeholder:r,onChange:s})},O=n(23),g="https://posts-pw2021.herokuapp.com/api/v1",p={};p.login=function(){var e=Object(b.a)(x.a.mark((function e(t,n){var r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"/auth/signin"),{method:"POST",headers:{"Content-type":"application/json"},body:JSON.stringify({username:t,password:n})});case 2:if(!(r=e.sent).ok){e.next=8;break}return e.next=6,r.json();case 6:return c=e.sent,e.abrupt("return",c);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),p.verifyToken=function(){var e=Object(b.a)(x.a.mark((function e(t){var n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(g,"/auth/whoami"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});case 2:if(!(n=e.sent).ok){e.next=8;break}return e.next=6,n.json();case 6:return r=e.sent,e.abrupt("return",r);case 8:return e.abrupt("return",{});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var v=p,y=c.a.createContext(),w="token",N=function(e){var t=Object(r.useState)(void 0),n=Object(f.a)(t,2),c=n[0],s=n[1],a=Object(r.useState)(void 0),o=Object(f.a)(a,2),l=o[0],j=o[1];Object(r.useEffect)((function(){var e=function(){var e=Object(b.a)(x.a.mark((function e(){var t,n,r,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=C())){e.next=8;break}return e.next=4,v.verifyToken(t);case 4:n=e.sent,r=n.username,c=n.role,r&&c&&(j({username:r,role:c}),u(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[c]);var u=function(e){localStorage.setItem(w,e),s(e)},d=Object(r.useCallback)((function(e,t){var n=function(){var n=Object(b.a)(x.a.mark((function n(){var r,c,s;return x.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=!1,n.prev=1,n.next=4,v.login(e,t);case 4:c=n.sent,(s=c.token)&&(u(s),r=!0),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0),console.error("Error in login");case 13:return n.prev=13,n.abrupt("return",r);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})));return function(){return n.apply(this,arguments)}}();return n()}),[]),h=Object(r.useCallback)((function(){j(void 0),u(void 0)}),[]),m=Object(r.useMemo)((function(){return{token:c,user:l,login:d,logout:h}}),[c,l,d,h]);return Object(i.jsx)(y.Provider,Object(O.a)({value:m},e))},k=function(){var e=c.a.useContext(y);if(!e)throw new Error("useUserContext() must be inside of UserProvider");return e},C=function(){return localStorage.getItem(w)},S=function(){var e=Object(j.g)(),t=k(),n=t.login,c=t.token,s=Object(r.useState)(""),a=Object(f.a)(s,2),u=a[0],d=a[1],O=Object(r.useState)(""),g=Object(f.a)(O,2),p=g[0],v=g[1],y=Object(r.useState)(!1),w=Object(f.a)(y,2),N=(w[0],w[1]),C=function(e,t){t(e.target.value)},S=function(){var e=Object(b.a)(x.a.mark((function e(t){var r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,n(u,p);case 3:r=e.sent,N(!r),d(""),v("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){console.log(c),c&&e("/Redirect")}),[c,e]),Object(i.jsxs)("div",{className:"flex flex-col justify-start items-center min-h-screen bg-gradient-to-r from-gray-600 to-green-400",children:[Object(i.jsx)(o,{}),Object(i.jsxs)("form",{className:"flex flex-col gap-4 items-center justify-center w-80 bg-green-900 mt-32 p-5 rounded-lg shadow-lg",onSubmit:S,children:[Object(i.jsx)("h1",{className:"text-5xl text-red-50 m-2",children:"Login"}),Object(i.jsx)(m,{type:"text",placeholder:"User",name:"name",onChange:function(e){return C(e,d)}}),Object(i.jsx)(m,{type:"password",placeholder:"Password",name:"name",onChange:function(e){return C(e,v)}}),Object(i.jsxs)("div",{className:"flex intems-center",children:[Object(i.jsx)(h,{onClick:function(t){e("/")},children:"Regresar"}),Object(i.jsxs)(l,{type:"submit",children:["Iniciar Sesi\xf3n "," "]})]})]})]})},F={admin:"/Admin",user:"/User"},L=function(){var e,t=k().user;return t?Object(i.jsx)(j.a,{replace:!0,to:null!==(e=F[t.role])&&void 0!==e?e:"/"}):Object(i.jsx)("div",{className:"flex flex-col justify-center items-center min-h-screen bg-gradient-to-r from-gray-600 to-green-400",children:Object(i.jsx)("h1",{className:"text-5xl text-red-50",children:"Lo sentimos, pero no se puede redireccionar"})})},P=function(){var e=Object(j.g)();return Object(i.jsxs)("div",{className:"flex flex-col justify-center items-center min-h-screen bg-gradient-to-r from-gray-600 to-green-400",children:[Object(i.jsx)("h1",{className:"text-5xl text-red-50 m-2",children:"Error 404"}),Object(i.jsx)("h3",{className:"text-2xl text-red-50 m-2",children:"Usted se ha perdido, precione el boton para regresar"}),Object(i.jsx)(h,{onClick:function(t){e("/")},children:"Regresar"})]})},E=function(e){var t=e.children;return Object(i.jsx)("button",{className:"bg-yellow-500 text-gray-900 hover:bg-yellow-800 hover:text-gray-50 h-8 w-28  m-2 rounded ",children:t})},I=function(){return Object(i.jsx)("button",{className:"bg-blue-500 text-gray-900 hover:bg-blue-800 hover:text-gray-50 h-8 w-28  m-2 rounded ",children:"Me Gusta"})},U=function(e){e.post;return Object(i.jsxs)("div",{className:"bg-gray-300 w-5/6 flex flex-col min-h-52 rounded-xl p-8",children:[Object(i.jsx)("h1",{children:"user quemado"}),Object(i.jsx)("p",{children:"descripcion quemada"}),Object(i.jsxs)("div",{className:"flex mt-3",children:[Object(i.jsx)(I,{}),Object(i.jsx)(E,{children:"Favorito"})]})]})},T=function(e){e.posts;return Object(i.jsx)("div",{className:"w-3/4 min-h-screen pt-8 bg-pink-50 rounded-lg flex flex-col items-center",children:Object(i.jsx)(U,{})})},A=n(22),B=n.n(A),q=function(){var e=Object(r.useState)([]),t=Object(f.a)(e,2),n=t[0],c=t[1],s=Object(r.useState)(0),a=Object(f.a)(s,2),j=a[0],u=(a[1],localStorage.getItem("token")),d="Bearer ".concat(u);return Object(r.useEffect)((function(){B.a.get("".concat(g,"/post/all?limit=10&page=").concat(j),{headers:{Authorization:d}}).then((function(e){var t=e.data;console.log(t.data),c(t.data)})).catch((function(e){console.log(e)}))}),[j]),Object(i.jsxs)("div",{className:"flex flex-col justify-start items-center min-h-screen bg-gradient-to-r from-gray-400 to-gray-300",children:[Object(i.jsxs)("div",{className:"w-screen flex justify-between items-center pl-8 pr-8",children:[Object(i.jsx)(o,{}),Object(i.jsxs)("div",{children:[Object(i.jsx)(E,{children:"Favoritos"}),Object(i.jsx)(l,{onClick:function(e){return localStorage.clear(),void(window.location.href="/")},children:"LogOut"})]})]}),Object(i.jsx)(T,{posts:n})]})},R=function(){return Object(i.jsxs)("div",{className:"flex flex-col justify-start items-center min-h-screen bg-gradient-to-r from-gray-400 to-gray-300",children:[Object(i.jsxs)("div",{className:"w-screen flex justify-between items-center pl-8 pr-8",children:[Object(i.jsx)(o,{}),Object(i.jsxs)("div",{className:"flex justify-center items-center",children:[Object(i.jsx)("h2",{className:"text-3xl text-yellow-50 m-2",children:"Favoritos(user)"}),Object(i.jsx)(l,{children:"LogOut"})]})]}),Object(i.jsx)("div",{className:"w-3/4 min-h-screen pt-8 bg-pink-50 rounded-lg flex flex-col items-center",children:Object(i.jsx)(U,{})})]})},z=function(e){var t=e.children;return Object(i.jsx)("button",{className:"bg-red-500 text-gray-900 hover:bg-red-800 hover:text-gray-50 h-8 w-28  m-2 rounded ",children:t})},D=function(){return Object(i.jsxs)("div",{className:"bg-gray-300 w-5/6 flex flex-col min-h-52 rounded-xl p-8",children:[Object(i.jsx)("h1",{children:"San Verg\xf3n"}),Object(i.jsx)("p",{children:'"Los ni\xf1os que nunca conocieron la paz tiene una moral diferente a los que nunca conocieron la guerra."'}),Object(i.jsxs)("div",{className:"flex mt-3",children:[Object(i.jsx)(I,{}),Object(i.jsx)(E,{children:"Favorito"}),Object(i.jsx)(z,{children:"Eliminar"})]})]})},J=function(){return Object(i.jsxs)("div",{className:"flex flex-col justify-start items-center min-h-screen bg-gradient-to-r from-gray-400 to-gray-300",children:[Object(i.jsxs)("div",{className:"w-screen flex justify-between items-center pl-8 pr-8",children:[Object(i.jsx)(o,{}),Object(i.jsx)(m,{type:"text",placeholder:"Nueva Publicaci\xf3n",name:"NPost"}),Object(i.jsx)(l,{children:"Publicar"}),Object(i.jsxs)("div",{children:[Object(i.jsx)(E,{children:"Favoritos"}),Object(i.jsx)(l,{onClick:function(e){return localStorage.clear(),void(window.location.href="/")},children:"LogOut"})]})]}),Object(i.jsx)("div",{className:"w-3/4 min-h-screen pt-8 bg-pink-50 rounded-lg flex flex-col items-center",children:Object(i.jsx)(D,{})})]})},M=function(){return Object(i.jsxs)("div",{className:"flex flex-col justify-start items-center min-h-screen bg-gradient-to-r from-gray-400 to-gray-300",children:[Object(i.jsxs)("div",{className:"w-screen flex justify-between items-center pl-8 pr-8",children:[Object(i.jsx)(o,{}),Object(i.jsxs)("div",{className:"flex justify-center items-center",children:[Object(i.jsx)("h2",{className:"text-3xl text-yellow-50 m-2",children:"Favoritos(admin)"}),Object(i.jsx)(l,{children:"LogOut"})]})]}),Object(i.jsx)("div",{className:"w-3/4 min-h-screen pt-8 bg-pink-50 rounded-lg flex flex-col items-center",children:Object(i.jsx)(U,{})})]})},G=n(8);var V=function(){return Object(i.jsx)(G.a,{children:Object(i.jsxs)(j.d,{children:[Object(i.jsx)(j.b,{path:"/",element:Object(i.jsx)(u,{})}),Object(i.jsx)(j.b,{path:"/Login",element:Object(i.jsx)(S,{})}),Object(i.jsx)(j.b,{path:"/Redirect",element:Object(i.jsx)(L,{})}),Object(i.jsx)(j.b,{path:"/User",element:Object(i.jsx)(q,{})}),Object(i.jsx)(j.b,{path:"/UserFavs",element:Object(i.jsx)(R,{})}),Object(i.jsx)(j.b,{path:"/Admin",element:Object(i.jsx)(J,{})}),Object(i.jsx)(j.b,{path:"/AdminFavs",element:Object(i.jsx)(M,{})}),Object(i.jsx)(j.b,{path:"*",element:Object(i.jsx)(P,{})})]})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,51)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),r(e),c(e),s(e),a(e)}))};a.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(N,{children:Object(i.jsx)(V,{})})}),document.getElementById("root")),H()}},[[50,1,2]]]);
//# sourceMappingURL=main.6adca1cb.chunk.js.map